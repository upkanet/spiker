<html>

<head>
    <title>Axorus - Spiker - FT</title>
</head>
<style>
    body {
        background-color: black;
    }
</style>
<script src="js/jquery3.5.1.min.js"></script>
<script src="js/plotly-latest.min.js"></script>
<script src="js/fili.min.js"></script>
<script src="js/math.min.js"></script>
<script>
    var layoutBlack = { paper_bgcolor: 'black', plot_bgcolor: 'black', font: { color: 'white' } };
    var period = 0;
    var fk0 = 0;
    getPeriod();

    function load() {
        $.getJSON('/data', function (data) {
            var d = {x: data.map((x,index) => index * period), y: data.map(x => x), type: 'line' };
            Plotly.newPlot('gElectrode', [d], layoutBlack);
        });
    }

    function loadSpectrum() {
        $.getJSON('/spectrum', function (data) {
            var N = data.length;
            var d = {x: data.map((x,k) => k / (N * period)), y: data.map(x => x), type: 'line' };
            Plotly.newPlot('gSpectrum', [d], layoutBlack);
        });
    }

    function getPeriod(){
        $.getJSON('/period', function (data) {
            period = data * 10000;
            load();
            loadSpectrum();
        });
    }
    
</script>

<body>
    <button type="button" onclick="load()">Load</button>
    <div id="gElectrode" style="width:100%;height:400px;"></div>
    <button type="button" onclick="loadSpectrum()">Spectrum</button>
    <div id="gSpectrum" style="width:100%;height:400px;"></div>
</body>

</html>